services:
  - type: web
    name: college-quisqueya-backend
    env: python
    plan: free

    # ============================================
    # üîß √âtape de build
    # ============================================
    buildCommand: |
      ./build.sh

    # ============================================
    # üöÄ Commande de d√©marrage
    # ============================================
    startCommand: |
      cd backend
      gunicorn backend.wsgi:application

    # ============================================
    # üåç Variables d‚Äôenvironnement Render
    # ============================================
    envVars:
      - key: DJANGO_SETTINGS_MODULE
        value: backend.deployment_settings

      - key: PYTHON_VERSION
        value: 3.13.4

      - key: SECRET_KEY
        generateValue: true

      # Base de donn√©es Render
      - key: DATABASE_URL
        sync: false

      # H√¥te public (Render)
      - key: RENDER_EXTERNAL_HOSTNAME
        fromService:
          type: web
          name: college-quisqueya-backend
          property: host
